<?//generates ids from the root id to a given id($sel_id)function getParentIds($table, $sel_id, $path = '', $sep = ',') {	$row = $_SERVER['db']->getRow("SELECT `parent`, `id` FROM `{$table}` WHERE `id` = '{$sel_id}'");		if ( $row['parent'] == 0 ){		if($path) return $row['id'].$sep.$path;		else return $row['id'];	}		return getParentIds($table, $row['parent'], $row['id'].$sep.$path, $sep);}//generates path from the root id to a given id($sel_id)function getPathFromId($table, $sel_id, $sep=' > ', $path="") {	$row = $_SERVER['db']->getRow("SELECT `parent`, `title` FROM `{$table}` WHERE `id` = '{$sel_id}'");	if ( $row['parent'] == 0 ){		$path = $row['title'].$path;		return $path;	}		$path = $sep.$row['title'].$path;	$path = getPathFromId($table, $row['parent'], $sep, $path);	return $path;}//generates nicely formatted linked path from the root id to a given idfunction getLinkedPathFromId($table, $sel_id, $funcURL, $urlName, $linkLast=true, $onClick="", $path="") {	if(!$path) { //First call			if($onClick) $onClick = ' onClick="'.$onClick.'"';	}	$row = $_SERVER['db']->getRow("SELECT `parent`, `title` FROM `{$table}` WHERE `id` = '{$sel_id}'");		if ($row['parent'] == 0) {		if(!$path && !$linkLast) return $row['title'].$path;		if($row['title']) return '<a href="'.$funcURL.'-'.$urlName.'-'.$sel_id.'"'.$onClick.'>'.$row['title'].'</a>'.$path;	}	else {		if(!$path && !$linkLast) return getLinkedPathFromId($table, $row['parent'], $funcURL, $urlName, $linkLast, $onClick, ' > '.$row['title'].$path);		return getLinkedPathFromId($table, $row['parent'], $funcURL, $urlName, $linkLast, $onClick, ' > <a href="'.$funcURL.'-'.$urlName.'-'.$sel_id.'"'.$onClick.'>'.$row['title'].'</a>'.$path);	}}//Returns an array of all the children's (and their children's) ids for the given $sel_idfunction getAllChildren($table,$sel_id=0,$extraSql="",$parray = '') {	if(!$sel_id) $sel_id = 0; //Handle NULL Values :)		$sql = "SELECT `id` FROM `{$table}` WHERE `parent`='{$sel_id}' {$extraSql}";	$rs = $_SERVER['db']->execute($sql);	if($rs) {		while ($row = $rs->fetchRow()) {			$parray[] = $row['id'];			$parray = $parray + getAllChildren($table,$row['id'],$extraSql,$parray);		}	}	return $parray;}//Returns a list of all the children's (and their children's) ids for the given $sel_idfunction getAllChildrenString($table,$sel_id=0,$extraSql="",$delimiter='',$pstring='',$pnum=0) {	$pnum += 1;	if(!$delimiter) $delimiter = ',';	$sql = "SELECT `id` FROM `{$table}` WHERE `parent`='{$sel_id}' {$extraSql}";	$row = $_SERVER['db']->execute($sql);	while (!$row->EOF) {		$pstring = $delimiter.$row->fields['id'].getAllChildrenString($table,$row->fields['id'],$extraSql,$delimiter,$pstring,$pnum);		$row->moveNext();	}	if($pnum == 1) return substr($pstring,1);	else return $pstring;}//This function returns all the child ids for the given parent id ($sel_id), and, if $children is included, also returns the first $children children of those child categoriesfunction getChildTreeArray($table,$sel_id=0,$extraSql='',$children=0) {	$sql = "SELECT * FROM `{$table}` WHERE `parent`='{$sel_id}' {$extraSql}";	$rs = $_SERVER['db']->execute($sql);	if($rs) {		while ($result = $rs->FetchRow()) {			$sql = "SELECT * FROM `{$table}` WHERE `parent`='{$result['id']}' LIMIT {$children}";			$crs = $_SERVER['db']->execute($sql);			$result['children'] = '';			if ($crs) while ($child = $crs->FetchRow()) $result['children'][] = $child;			$array[] = $result;		}	}	return $array;}?>